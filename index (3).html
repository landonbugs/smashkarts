<!doctype html>
<html lang="en-us">
 <head>
  <base href="https://smashkarts.io/">
  <script>
		//AB TEST VARS
		var playwireEnabled = true;
		var playwireRampInitialised = false;

		var pendingGoogleOptimiseABTestLoadDetails = null;
	</script>
  <script src="scripts/ads-offcanvas-vars.js"></script> <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z574SSVGGZ"></script>
  <script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-Z574SSVGGZ');
	</script> <!-- Google site tag end --> <!-- Required for AB Testing via Google Optimise -->
  <script src="https://www.googleoptimize.com/optimize.js?id=OPT-W8QW63G"></script>
  <meta charset="utf-8">
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@600&amp;display=swap" rel="stylesheet">
  <link rel="icon" href="images/favicon.png" sizes="16x16"> <!-- og: Open graph meta tags allow you to control what content shows up when a page is shared on Facebook -->
  <meta property="og:site_name" content="SmashKarts.io">
  <meta property="og:title" content="Smash Karts">
  <meta property="og:url" content="https://smashkarts.io/">
  <meta property="og:type" content="website">
  <meta property="og:description" content="Smash Karts is a free io Multiplayer Kart Battle Arena game. Drive fast. Fire rockets. Make big explosions.">
  <meta property="og:image" content="images/icon-144.png">
  <meta property="og:image:width" content="144">
  <meta property="og:image:height" content="144">
  <meta itemprop="name" content="Smash Karts">
  <meta itemprop="url" content="https://smashkarts.io/">
  <meta itemprop="description" content="Smash Karts is a free io Multiplayer Kart Battle Arena game. Drive fast. Fire rockets. Make big explosions.">
  <meta itemprop="thumbnailUrl" content="https://smashkarts.io/">
  <link rel="image_src" href="https://smashkarts.io/">
  <meta itemprop="image" content="https://smashkarts.io/">
  <meta name="twitter:title" content="Smash Karts">
  <meta name="twitter:image" content="images/icon-144.png">
  <meta name="twitter:url" content="https://smashkarts.io/">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:description" content="Smash Karts is a free io Multiplayer Kart Battle Arena game. Drive fast. Fire rockets. Make big explosions.">
  <meta name="description" content="Smash Karts is a free io Multiplayer Kart Battle Arena game. Drive fast. Fire rockets. Make big explosions.">
  <meta name="google-site-verification" content="Kb9JniKgGSfuiJM_DNO2-Va7cSC00GlcBzbDw1Lgw_4">
  <meta itemprop="image primaryImageOfPage" content="images/smashkarts.png">
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-title" content="Smash Karts">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="images/icon-144.png"> <!-- <script type="text/javascript" src="xmlhttprequest-length-computable.js"></script> --> <!--<script type="text/javascript" src="xmlhttprequest-length-computable.min.js"></script>
	<script type="text/javascript">
		window.xmlHTTPRequestLengthComputable = {
			CONTENT_ENCODING_MULTIPLE: 3.0
		}
	</script> --> <!-- Onesignal push notifications -->
  <script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async></script>
  <script>
		var OneSignal = window.OneSignal || [];
		OneSignal.push(function ()
		{
			OneSignal.init({
				appId: "e618063a-f56d-448f-9dbf-c1bebb50f935",
			});
		});
	</script> <!-- Youtube Game Schema -->
  <script type="application/ld+json">
		{
			"@context": "http://schema.org",
			"@type":"VideoGame",
			"publisher": "Tall Team",
			"name":[
				{
					"@language":"en",
					"@value":"Smash Karts"
				}
			],
			"description":[
				{
					"@language":"en",
					"@value":"Smash Karts is a free io Multiplayer Kart Battle Arena game. Drive fast. Fire rockets. Make big explosions."
				}
			],
			"applicationCategory":[
				"Game"
			],
			"operatingSystem":[
				"WEB"
			],
			"genre":[
				"Car Battle",
				"Shooter",
				"Multiplayer"
			],
			"url":"https://smashkarts.io/",
			"image":"images/SmashKartsPoster.jpg",
			"screenshot":"images/SmashKartsBackground.jpg"
		}
	</script>
  <title>Smash Karts</title>
  <link rel="stylesheet" href="css/main.css">
  <meta name="viewport" content="minimal-ui, user-scalable=no, initial-scale=1, maximum-scale=1, width=device-width, viewport-fit=cover"> <!-- AD INIT START -->
  <script>
		//Keep this in global scope
		let adBreak;

		if(!playwireEnabled)
		{
			//GOOGLE
			window.googletag = window.googletag || { cmd: [] };
			googletag.cmd.push(() =>
			{
				var url = (window.location != window.parent.location) ? document.referrer : document.location.href;
				if (url.startsWith("https://smashkarts.io/") || url.startsWith("http://smashkarts.io/") ||
						url.startsWith("https://www.smashkarts.io/") || url.startsWith("http://www.smashkarts.io/")
						|| url.includes("smashkarts-dev.firebaseapp.com"))
				{
					(function ()
					{
						var afgads = document.createElement('script');
						afgads.setAttribute("async", true);
						afgads.setAttribute("type", "text/javascript");
						afgads.setAttribute("data-ad-client", "ca-pub-1463476156508236");
						afgads.setAttribute("src", "https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js");
						var node = document.getElementsByTagName('script')[0];
						node.parentNode.insertBefore(afgads, node);
					})();

					window.adsbygoogle = window.adsbygoogle || [];
					adBreak = adConfig = function (o) { adsbygoogle.push(o); };
					adConfig({ preloadAdBreaks: "on", sound: "on" });
				}
			});

			//ADINPLAY
			window.aiptag = window.aiptag || { cmd: [] };
			aiptag.cmd.display = aiptag.cmd.display || [];

			// Show GDPR consent tool
			aiptag.gdprShowConsentTool = true;
			aiptag.gdprConsentToolPosition = "bottom";

			var adinplayScript = document.createElement("script");
			adinplayScript.type = "text/javascript";
			adinplayScript.async = true;
			adinplayScript.src = "//api.adinplay.com/libs/aiptag/pub/SHK/smashkarts.io/tag.min.js";
			document.head.appendChild(adinplayScript);
		}
		else
		{
			//PLAYWIRE RAMP v1.0
			// var ramp = {config: '//config.playwire.com/1024690/v2/websites/73592/banner.json' };
			//
			// var playwireScript = document.createElement("script");
			// playwireScript.id = "ramp";
			// playwireScript.type = "text/javascript";
			// playwireScript.async = true;
			// playwireScript.src = "//cdn.intergient.com/ramp.js";
			// document.head.appendChild(playwireScript);

			//PLAYWIRE RAMP v2.0
			window.ramp = window.ramp || {};
			window.ramp.que = window.ramp.que || [];
			window.ramp.passiveMode = true;
			window.ramp.onReady = function()
			{
				playwireRampInitialised = true;
			};

			window._pwGA4PageviewId = ''.concat(Date.now());
			window.dataLayer = window.dataLayer || [];
			window.gtag = window.gtag || function () {
				dataLayer.push(arguments);
			};
			gtag('js', new Date());
			gtag('config', 'G-F2WLE0BJLM', { 'send_page_view': false });
			gtag(
					'event',
					'ramp_js',
					{
						'send_to': 'G-F2WLE0BJLM',
						'pageview_id': window._pwGA4PageviewId
					}
			);

			var playwireScript = document.createElement("script");
			playwireScript.type = "text/javascript";
			playwireScript.async = true;
			playwireScript.src = "//cdn.intergient.com/1024690/73592/ramp.js";
			document.head.appendChild(playwireScript);

			//PLAYWIRE PRECONNECTS
			addPreconnectLink("https://cdn.intergi.com", true);
			addPreconnectLink("https://cdn.intergient.com", true);
			addPreconnectLink("https://securepubads.g.doubleclick.net", true);
			addPreconnectLink("https://cdn.playwire.com", true);
			addPreconnectLink("https://z.moatads.com", true);

			function addPreconnectLink(preconnectUrl, crossOriginEnabled)
			{
				var link = document.createElement('link');
				link.rel = 'preconnect';
				link.href = preconnectUrl;

				if(crossOriginEnabled)
				{
					link.crossOrigin = 'anonymous';
				}

				document.head.appendChild(link);
			}
		}
	</script> <!-- AD INIT END -->
  <meta http-equiv="X-Translated-By" content="Google">
  <meta http-equiv="X-Translated-To" content="en">
  <script type="text/javascript" src="https://www.gstatic.com/_/translate_http/_/js/k=translate_http.tr.en_US.GfRYOQHFIxI.O/d=1/rs=AN8SPfrJkKvQJFXnERxp2uqQKrYO4ur28g/m=ajaxproxy" data-sourceurl="https://smashkarts.io/"></script>
  <meta name="robots" content="none">
 </head>
 <body>
  <script type="text/javascript" src="https://www.gstatic.com/_/translate_http/_/js/k=translate_http.tr.en_US.GfRYOQHFIxI.O/d=1/exm=ajaxproxy/ed=1/rs=AN8SPfrJkKvQJFXnERxp2uqQKrYO4ur28g/m=navigationui" data-environment="prod" data-proxy-url="https://smashkarts-io.translate.goog" data-proxy-full-url="https://smashkarts-io.translate.goog/?_x_tr_sl=auto&amp;_x_tr_tl=en&amp;_x_tr_hl=en-US" data-source-url="https://smashkarts.io/" data-source-language="auto" data-target-language="en" data-display-language="en-US" data-detected-source-language="en" data-is-source-untranslated="false" data-source-untranslated-url="https://translate.google.com/website?sl=auto&amp;tl=en&amp;hl=en-US&amp;u=https://smashkarts.io/&amp;anno=2" data-use-in-place-translation="true" data-client="tr"></script>
  <div id="mainContainer">
   <div id="mainContainerBg"></div>
   <div id="leftContainer">
    <div id="gameContainer">
     <canvas id="gameCanvas"></canvas> <!-- On canvas ad containers -->
     <div id="adContainerMainMenu"> <!-- main menu -->
      <div id="smashkarts-io_300x250"></div> <!-- adinplay --> <!-- playwire -->
      <div id="pw_mainmenu"></div> <!-- <div data-pw-desk="med_rect_atf" data-pw-mobi="med_rect_atf"></div> -->
     </div>
     <div id="adContainerWin"> <!-- win ceremony -->
      <div id="smashkarts-io_300x250_2"></div> <!-- adinplay --> <!-- playwire -->
      <div id="pw_roundend"></div> <!-- <div data-pw-desk="med_rect_btf" data-pw-mobi="med_rect_btf"></div> -->
     </div>
     <div id="adContainerDeath"> <!-- death --> <!-- adinplay -->
      <div id="smashkarts-io_728x90-new"></div>
      <div id="smashkarts-io_320x100"></div> <!-- playwire -->
      <div id="pw_ondeath"></div> <!-- <div data-pw-desk="leaderboard_atf" data-pw-mobi="leaderboard_atf"></div> -->
     </div>
     <div id="videoAdContainer">
      <div id="preroll"></div>
     </div>
    </div>
    <div id="btmContainer">
     <div id="btmAdPlaceholder">
      <div id="btmAdPlaceholderBg"></div>
      <div id="btmAdBlockerContainer">
       <img id="btmAdBlockerImg" src="images/turnoffadblock.png">
       <h1 id="btmAdBlockerText">Disable AdBlock for extra XP</h1>
      </div>
     </div>
     <h1 id="btmAdResText">unset</h1>
    </div>
    <div id="pw-video-container"> <!-- playwire -->
     <div id="pw-video-placeholder"></div>
    </div>
   </div>
   <div id="rightContainer">
    <div id="rightAdPlaceholder">
     <div id="rightAdPlaceholderBg"></div>
     <div id="rightAdBlockerContainer">
      <img id="rightAdBlockerImg" src="images/turnoffadblock.png">
      <h1 id="rightAdBlockerText">Disable AdBlock for extra XP</h1>
     </div>
    </div>
    <h1 id="rightAdResText">unset</h1>
   </div>
  </div>
  <div id="loader">
   <img class="logo" src="images/smashkarts.png">
   <div class="spinner"></div>
   <div class="progress">
    <div class="full"></div>
   </div>
  </div>
  <div id="rotate-landscape">
   <img src="images/r.png" class="center">
  </div>
  <script src="https://www.gstatic.com/firebasejs/9.9.3/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.9.3/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.9.3/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.9.3/firebase-analytics-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.9.3/firebase-functions-compat.js"></script>
  <script src="scripts/main.js"></script>
  <script src="scripts/auth.js"></script>
  <script src="scripts/ads-common-logic.js"></script>
  <script src="scripts/ads-offcanvas-logic.js"></script>
  <script src="scripts/ads-positioning-logic.js"></script>
  <script>
	var srcAdProvider = playwireEnabled ? "scripts/ads-pw.js" : "scripts/ads-adinplay.js";
	document.write(`<script src=${srcAdProvider}><\/script>`);
</script>
  <script>
	//Used for installing progressive web apps
	if ('serviceWorker' in navigator)
	{
		navigator.serviceWorker.register('service-worker2.js');
	}

	const firebaseConfig = {
    apiKey: "AIzaSyAdY2qq9083amKDS0R8tn2tjIKQB8mocco",
    authDomain: "webgltest-17af1.firebaseapp.com",
    databaseURL: "https://webgltest-17af1.firebaseio.com",
    projectId: "webgltest-17af1",
    storageBucket: "webgltest-17af1.appspot.com",
    messagingSenderId: "480659433590",
    appId: "1:480659433590:web:a01ad1599e963843a0d757",
    measurementId: "G-1W23DRFHK9"
};

	
	// Initialize Firebase
	firebase.initializeApp(firebaseConfig);

	

	var firebaseSupported = false;
	if(firebase.analytics != null)
	{
		firebase.analytics.isSupported().then((isSupported) =>
		{
			if (isSupported)
			{
				analytics = firebase.analytics();
				firebaseSupported = true;
			}
			else
			{
				console.log("firebase.analytics() not supported ");
			}
		})
	}

	firebaseSetScreen("loading_start");
	firebaseLogEvent("loading_page_start");

	updateAdBlockDetected();
	
	var timerStart = Date.now();
	var sentGameInstanceStartEvent = false;

	const buildUrl = "https://smashkartsgc.b-cdn.net/Build2020New";

	const loaderUrl = buildUrl + "/basicGamepadControls2.loader.js";
	const config = {
		dataUrl: buildUrl + "/86825f05d856013c8b770d57c0c8ba2b.data.br",
		frameworkUrl: buildUrl + "/76ff70ac0efcbd82a3ef01d863519aa8.js.br",
		codeUrl: buildUrl + "/6d4bba11bc947fbddc7277ba6f630abb.wasm.br",
		// #if MEMORY_FILENAME
		//         memoryUrl: buildUrl + "/",
		// #endif
		// #if SYMBOLS_FILENAME
		//         symbolsUrl: buildUrl + "/",
		// #endif
		streamingAssetsUrl: "StreamingAssets",
		companyName: "TallTeam",
		productName: "Smash Karts",
		productVersion: "2.0.5",
	};

	var mainContainer = document.querySelector("#mainContainer");
	var gameContainer = document.querySelector("#gameContainer");
	var canvas = document.querySelector("#gameCanvas");
	var loadingBar = document.querySelector("#loader");
	var progressBarFull = document.querySelector("#loader .progress .full");
	var rotateLandscape = document.querySelector("#rotate-landscape");

	var btmAdContainer = document.getElementById("btmContainer");
	var btmAdPlaceholder = document.getElementById("btmAdPlaceholder");
	var btmAdResText = document.getElementById("btmAdResText");

	var rightAdContainer = document.getElementById("rightContainer");
	var rightAdPlaceholder = document.getElementById("rightAdPlaceholder");
	var rightAdResText = document.getElementById("rightAdResText");

	if (isMobile())
	{
		mainContainer.className = "unity-mobile";

		// if(isIos())
		// {
		// 	//Allow scrolling on mobile iOS so user can scroll off the top tab bar
		// 	document.body.style.overflow = "visible";
		// }
	}
	else
	{
		rotateLandscape.id = "rotateLandscapeOff";
		rotateLandscape.style.display = "none";
	}
	const progress = document.querySelector("#loader .progress");
	progress.style.display = "block";
	progressBarFull.style.width = "0%";

	var script = document.createElement("script");
	script.src = loaderUrl;

	var progressCreateUnityInstance = 0;
	var progressPostCreateUnityInstance = 0;
	var updateProgressInterval = setInterval(updateProgress, 100);

	var gameInstance;
	script.onload = () =>
	{
		createUnityInstance(canvas, config, (progress) =>
		{
			progressCreateUnityInstance = 100 * progress;
			setProgressWidth();
		}).then((unityInstance) =>
		{
			if (isMobile()) document.body.style.background = "#000000";
			loadingBar.style.display = "none";
			window.unityGame = unityInstance;
			gameInstance = unityInstance;

			if (updateProgressInterval) clearInterval(updateProgressInterval);

			var lt = Date.now() - timerStart;
			firebaseLogEventWithParam("loading_page_complete", "time", lt);
			setV(lt);

			onUnityLoadComplete();
		}).catch((message) =>
		{
			alert("TT UnityLoader Error" + message);
		});
	};
	document.body.appendChild(script);

	function onUnityLoadComplete()
	{
		//set initial playwire enabled value in Unity
		window.unityGame.SendMessage(unityFirebaseGameOjbectName, "SetPlaywireEnabled", playwireEnabled ? 1 : 0);

		trySendGoogleOptimiseABTestLoadedMessage();

		trySendAdBlockDetectedMessage();
	}

	function updateProgress()
	{
		if (progressCreateUnityInstance > 85)
		{
			progressPostCreateUnityInstance += 1;
			setProgressWidth();
		}
	}

	function setProgressWidth()
	{
		if (progressCreateUnityInstance == 100.0)
		{
			progressBarFull.style.width = "100%";
		}
		else
		{
			var percent;
			if (isMobile())
			{
				percent = progressCreateUnityInstance * 0.6 + (progressPostCreateUnityInstance * 0.5 * 0.2 + progressCreateUnityInstance * 0.5 * 0.2 * 0.05);
				percent = Math.min(percent, 90);
			}
			else
			{
				percent = progressCreateUnityInstance * 0.9 + progressPostCreateUnityInstance * 0.1;
				percent = Math.min(percent, 95);
			}
			progressBarFull.style.width = percent + "%";
		}
	}

	function initGoogleOptimizeCallback()
	{
		gtag('event', 'optimize.callback', {
			callback: (value, name) =>
			{
				//console.log(`Google Optimize callback id: ${name} variant: ${value}`);

				pendingGoogleOptimiseABTestLoadDetails = `id_${name}_variant_${value}`;

				setAdinPlaySubIdForABTest(pendingGoogleOptimiseABTestLoadDetails);

				trySendGoogleOptimiseABTestLoadedMessage();
			}
		});
	}

	function setAdinPlaySubIdForABTest(val)
	{
		//set adinplay subid which enables segmented daily reports
		aiptag.subid = val;
	}

	function trySendGoogleOptimiseABTestLoadedMessage()
	{
		if(window.unityGame != null && pendingGoogleOptimiseABTestLoadDetails != null)
		{
			//console.log(`Google Optimize send message OnGoogleOptimizeABTestLoaded ${pendingGoogleOptimiseABTestLoadDetails}`);

			window.unityGame.SendMessage(unityFirebaseGameOjbectName, "OnGoogleOptimizeABTestLoaded", pendingGoogleOptimiseABTestLoadDetails);

			//playwire could have been enabled via ab test
			window.unityGame.SendMessage(unityFirebaseGameOjbectName, "SetPlaywireEnabled", playwireEnabled ? 1 : 0);

			pendingGoogleOptimiseABTestLoadDetails = null;
		}
		// else
		// {
		// 	console.log(`Google Optimize error window.unityGame: ${window.unityGame} pendingGoogleOptimiseABTestLoadDetails: ${pendingGoogleOptimiseABTestLoadDetails}`);
		// }
	}

	function onLoad()
	{
		initGoogleOptimizeCallback();
		updateGameCanvasSize();
	}

	function onResize()
	{
		updateGameCanvasSize();
	}

	function updateGameCanvasSize()
	{
		//set game canvas size
		var borderWidth = displayingRightAd() ? offCanvasBorderSize : 0;
		var borderHeight = displayingBtmAd() ?  offCanvasBorderSize : 0;

		//main container padding
		var mainContainerStyle = getComputedStyle(mainContainer);
		var mainContainerPadLeft = parseInt(mainContainerStyle.getPropertyValue("padding-left"));
		var mainContainerPadRight = parseInt(mainContainerStyle.getPropertyValue("padding-right"));
		var mainContainerPadTop = parseInt(mainContainerStyle.getPropertyValue("padding-top"));
		var mainContainerPadBtm = parseInt(mainContainerStyle.getPropertyValue("padding-bottom"));

		canvas.style.width = window.innerWidth - borderWidth - mainContainerPadLeft - mainContainerPadRight - rightAdContainer.getBoundingClientRect().width + "px";
		canvas.style.height = window.innerHeight - borderHeight - mainContainerPadTop - mainContainerPadBtm - btmAdContainer.getBoundingClientRect().height + "px";
	}

	window.addEventListener("load", onLoad);
	window.addEventListener("resize", onResize);

</script>
  <script>function gtElInit() {var lib = new google.translate.TranslateService();lib.translatePage('en', 'en', function () {});}</script>
  <script src="https://translate.google.com/translate_a/element.js?cb=gtElInit&amp;hl=en-US&amp;client=wt" type="text/javascript"></script>
 </body>
</html>